<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.2"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="white"/>

  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">Common Architectural Patterns</text>

  <!-- Section 1: Layered Architecture (Monolith) -->
  <text x="150" y="80" font-family="Arial" font-size="16" font-weight="bold" fill="#0277bd" text-anchor="middle">1. Layered (Monolith)</text>
  <g transform="translate(50, 100)">
    <!-- Presentation -->
    <rect x="0" y="0" width="200" height="40" rx="5" ry="5" fill="#e1f5fe" stroke="#0277bd" stroke-width="2"/>
    <text x="100" y="25" font-family="Arial" font-size="12" text-anchor="middle">Presentation Layer (UI)</text>
    <line x1="100" y1="40" x2="100" y2="60" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

    <!-- Business Logic -->
    <rect x="0" y="60" width="200" height="40" rx="5" ry="5" fill="#b3e5fc" stroke="#0277bd" stroke-width="2"/>
    <text x="100" y="85" font-family="Arial" font-size="12" text-anchor="middle">Business Logic Layer</text>
    <line x1="100" y1="100" x2="100" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

    <!-- Data Access -->
    <rect x="0" y="120" width="200" height="40" rx="5" ry="5" fill="#81d4fa" stroke="#0277bd" stroke-width="2"/>
    <text x="100" y="145" font-family="Arial" font-size="12" text-anchor="middle">Data Access Layer</text>
    <line x1="100" y1="160" x2="100" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

    <!-- Database -->
    <path d="M 0 190 Q 100 200 200 190 L 200 230 Q 100 240 0 230 Z" fill="#4fc3f7" stroke="#0277bd" stroke-width="2"/>
    <path d="M 0 190 Q 100 180 200 190" fill="#81d4fa" stroke="#0277bd" stroke-width="2"/>
    <text x="100" y="215" font-family="Arial" font-size="12" text-anchor="middle">Single Database</text>
  </g>

  <!-- Section 2: Microservices -->
  <text x="550" y="80" font-family="Arial" font-size="16" font-weight="bold" fill="#2e7d32" text-anchor="middle">2. Microservices</text>
  <g transform="translate(350, 100)">
    <!-- API Gateway -->
    <rect x="100" y="0" width="200" height="40" rx="5" ry="5" fill="#c8e6c9" stroke="#2e7d32" stroke-width="2"/>
    <text x="200" y="25" font-family="Arial" font-size="12" text-anchor="middle">API Gateway</text>
    
    <!-- Arrows to Services -->
    <line x1="150" y1="40" x2="100" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="250" y1="40" x2="300" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

    <!-- Service A -->
    <g transform="translate(0, 80)">
       <rect x="0" y="0" width="120" height="60" rx="5" ry="5" fill="#a5d6a7" stroke="#2e7d32" stroke-width="2"/>
       <text x="60" y="25" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">User Service</text>
       <!-- DB A -->
       <path d="M 30 70 Q 60 75 90 70 L 90 90 Q 60 95 30 90 Z" fill="#66bb6a" stroke="#2e7d32"/>
       <path d="M 30 70 Q 60 65 90 70" fill="#81c784" stroke="#2e7d32"/>
    </g>

    <!-- Service B -->
    <g transform="translate(260, 80)">
       <rect x="0" y="0" width="120" height="60" rx="5" ry="5" fill="#a5d6a7" stroke="#2e7d32" stroke-width="2"/>
       <text x="60" y="25" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Order Service</text>
        <!-- DB B -->
       <path d="M 30 70 Q 60 75 90 70 L 90 90 Q 60 95 30 90 Z" fill="#66bb6a" stroke="#2e7d32"/>
       <path d="M 30 70 Q 60 65 90 70" fill="#81c784" stroke="#2e7d32"/>
    </g>
  </g>

  <!-- Section 3: Event-Driven -->
  <text x="400" y="320" font-family="Arial" font-size="16" font-weight="bold" fill="#ef6c00" text-anchor="middle">3. Event-Driven (Pub/Sub)</text>
  <g transform="translate(100, 350)">
    
    <!-- Producer -->
    <rect x="0" y="50" width="100" height="50" rx="5" ry="5" fill="#ffe0b2" stroke="#ef6c00" stroke-width="2"/>
    <text x="50" y="80" font-family="Arial" font-size="12" text-anchor="middle">Publisher</text>

    <!-- Arrow -->
    <line x1="100" y1="75" x2="150" y2="75" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

    <!-- Event Bus -->
    <rect x="150" y="40" width="300" height="70" rx="10" ry="10" fill="#fff3e0" stroke="#ef6c00" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="300" y="80" font-family="Arial" font-size="14" font-weight="bold" fill="#ef6c00" text-anchor="middle">Event Bus / Broker</text>

    <!-- Consumers -->
    <!-- Consumer 1 -->
    <line x1="450" y1="60" x2="520" y2="40" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <rect x="520" y="20" width="100" height="40" rx="5" ry="5" fill="#ffe0b2" stroke="#ef6c00" stroke-width="2"/>
    <text x="570" y="45" font-family="Arial" font-size="12" text-anchor="middle">Subscriber A</text>

    <!-- Consumer 2 -->
    <line x1="450" y1="90" x2="520" y2="110" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <rect x="520" y="90" width="100" height="40" rx="5" ry="5" fill="#ffe0b2" stroke="#ef6c00" stroke-width="2"/>
    <text x="570" y="115" font-family="Arial" font-size="12" text-anchor="middle">Subscriber B</text>

  </g>

</svg>
